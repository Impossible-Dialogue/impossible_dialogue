# Funkadelephant Lights
This project develops a new light system for the Funkadelephant art car. 

Design doc:
https://docs.google.com/document/d/193zCBdZJQ2zM1hZOcOoi2PbTF1X6veQUsoNvbH2qYzI/edit#heading=h.bk4r5cyiqgef

Photos of Funkadelephant BEFORE the lights upgrades:
https://photos.app.goo.gl/gXQorENS9bhVreZ16

3D Mesh files for the Funkadelephant art car:
https://drive.google.com/drive/folders/1XdZmZc8DAyeh26kRkMO6nCtN7fgZzTzO?usp=sharing

## Visualization

The visualization consists of two parts right now. A server that serves LED control packets over websockets and a 3D visualizer written in javasript and three.js.

Note: the websockets server is currently not connected and reimplementing funky_lights.py. This should change. Either the two programs should become one or the websockets server should be able to listen to the serial coms created by funky_lights.py.

To start the websockets server:
``` 
cd visualization
python server.py
``` 

To start a webserver for the 3D visualizer run in the same folder:
``` 
python -m http.server
``` 

Now point a browser to http://localhost:8000/three.js/editor 

The LED configuration is loaded when opening the page. The Funky 3D object can be loaded optionally loaded (File->Import->funky.obj or File->Import->dome.obj). Also add some light sources (Add->Ambient/Directional lights).

The LED configuration was generated by fitting a 3D line to the mesh of one of the dome tubes, sampling 30 points along this line, and writing everything out in a simple JSON config format.

Run the following script to update the config:
``` 
python generate_led_config.py
``` 

Video of the prototype: https://youtu.be/v4KDhiCZiSY